# üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### üìä –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **17 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü** —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- **–ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- ‚úÖ **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **drivers** - –≤–æ–¥–∏—Ç–µ–ª–∏
- ‚úÖ **counterparties** - –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
- ‚úÖ **concrete_grades** - –º–∞—Ä–∫–∏ –±–µ—Ç–æ–Ω–∞
- ‚úÖ **warehouses** - —Å–∫–ª–∞–¥—ã
- ‚úÖ **materials** - –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- ‚úÖ **vehicles** - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç

#### –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã:
- ‚úÖ **orders** - –∑–∞–∫–∞–∑—ã –±–µ—Ç–æ–Ω–∞
- ‚úÖ **expense_invoices** - —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
- ‚úÖ **receipt_invoices** - –ø—Ä–∏—Ö–æ–¥–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
- ‚úÖ **receipt_invoice_items** - –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏—Ö–æ–¥–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
- ‚úÖ **weighings** - –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è
- ‚úÖ **prices** - —Ü–µ–Ω—ã

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ **internal_requests** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞—è–≤–∫–∏
- ‚úÖ **messages** - —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
- ‚úÖ **audit_logs** - –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ **system_settings** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è:
- –ë—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –ª–æ–≥–∏–Ω—É –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –¥–∞—Ç–∞–º
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –°–æ—Å—Ç–∞–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL:
- `shared_buffers = 256MB`
- `effective_cache_size = 1GB`
- `maintenance_work_mem = 64MB`
- `checkpoint_completion_target = 0.9`

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- **–ò–º—è**: `betonapp_user`
- **–ë–∞–∑–∞**: `betonapp_production`
- **–ü—Ä–∞–≤–∞**: —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å bcrypt (12 —Ä–∞—É–Ω–¥–æ–≤)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ö–µ–º—ã
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
- –ê—É–¥–∏—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∫–∞–∫ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
sudo -u postgres psql

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è
\i backend/scripts/setup-production-db.sql
```

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
```bash
cd backend

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run prisma:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run prisma:migrate:prod

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
psql -d betonapp_production -f ../scripts/create-indexes.sql
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```bash
cd backend

# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö
npm run prisma:seed:prod
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
```bash
cd backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run db:verify
```

## üìã –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã:
- **admin** / admin123 (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- **director** / director123 (–î–∏—Ä–µ–∫—Ç–æ—Ä)
- **manager** / manager123 (–ú–µ–Ω–µ–¥–∂–µ—Ä)

### üè≠ –°–∫–ª–∞–¥—ã:
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥** (–≥. –ê–ª–º–∞—Ç—ã, —É–ª. –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è, 1)

### üì¶ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã:
- **–¶–µ–º–µ–Ω—Ç –ú400** (–º–∏–Ω–∏–º—É–º: 10—Ç)
- **–©–µ–±–µ–Ω—å —Ñ—Ä. 5-20** (–º–∏–Ω–∏–º—É–º: 50—Ç)
- **–ü–µ—Å–æ–∫ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π** (–º–∏–Ω–∏–º—É–º: 30—Ç)
- **–ü–ª–∞—Å—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä** (–º–∏–Ω–∏–º—É–º: 100–ª)

### üèóÔ∏è –ú–∞—Ä–∫–∏ –±–µ—Ç–æ–Ω–∞:
- **–ú200** - –¥–ª—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–≤
- **–ú300** - –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- **–ú400** - –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

### ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: "–¢–û–û –ë–µ—Ç–æ–Ω–ó–∞–≤–æ–¥"
- –ê–¥—Ä–µ—Å: –≥. –ê–ª–º–∞—Ç—ã, —É–ª. –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è, 1
- –¢–µ–ª–µ—Ñ–æ–Ω: +7 (727) 123-45-67
- –í–∞–ª—é—Ç–∞: KZT

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
psql -h localhost -U betonapp_user -d betonapp_production -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
psql -h localhost -U betonapp_user -d betonapp_production -c "\dt"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
psql -h localhost -U betonapp_user -d betonapp_production -c "SELECT login, role FROM users;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```bash
cd backend
npm run db:verify
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

#### –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```sql
SELECT pg_size_pretty(pg_database_size('betonapp_production'));
```

#### –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
```sql
SELECT count(*) FROM pg_stat_activity WHERE state = 'active';
```

#### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
```sql
SELECT query, calls, total_time, mean_time 
FROM pg_stat_statements 
WHERE mean_time > 100 
ORDER BY mean_time DESC 
LIMIT 10;
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤:
```sql
SELECT schemaname, tablename, indexname, idx_scan, idx_tup_read
FROM pg_stat_user_indexes
ORDER BY idx_scan DESC;
```

## üîÑ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞:
```bash
# –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
pg_dump -h localhost -U betonapp_user betonapp_production > backup_$(date +%Y%m%d_%H%M%S).sql

# –¢–æ–ª—å–∫–æ —Å—Ö–µ–º–∞
pg_dump -h localhost -U betonapp_user --schema-only betonapp_production > schema_backup.sql

# –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
pg_dump -h localhost -U betonapp_user --data-only betonapp_production > data_backup.sql
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
psql -h localhost -U betonapp_user -d betonapp_production < backup.sql
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
2. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã**
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø** –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
1. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** (`ANALYZE`)
3. **–û—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–∑ audit_logs
4. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞–∑–º–µ—Ä–æ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ connection pooling** (PgBouncer)
2. **–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ read replicas** –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
3. **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
4. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üéâ –ì–æ—Ç–æ–≤–æ!

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö BetonApp –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

‚úÖ **–ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞** - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∏  
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –∏–Ω–¥–µ–∫—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –∞—É–¥–∏—Ç  
‚úÖ **–ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –≥–æ—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è  
‚úÖ **–ë—ç–∫–∞–ø—ã** - —Å–∫—Ä–∏–ø—Ç—ã —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è  

**–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω!** üöÄ