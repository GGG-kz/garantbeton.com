import{a as e,j as s,P as r}from"./index-DssK2aQr.js";import{r as t}from"./vendor-CPG67Noa.js";import{E as n}from"./orders-wRWCNCfU.js";import{S as a,O as o,Q as l,x as i,X as d,V as c,i as m,P as x,_ as u,G as p}from"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";function h(){const[h,j]=e("additionalServices",n),[f,b]=t.useState(""),[g,v]=t.useState(null),[N,w]=t.useState({name:"",price:0,unit:"per_m3"}),y=h.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),k=()=>{g&&j(e=>e.map(e=>e.id===g.id?{...e,...N}:e)),v(null),w({name:"",price:0,unit:"per_m3"})},C=()=>{v(null),w({name:"",price:0,unit:"per_m3"})},_=e=>{switch(e){case"per_m3":return"за м³";case"per_hour":return"за час";case"fixed":return"за заказ";default:return e}},S=e=>{switch(e){case"per_m3":default:return s.jsx(x,{className:"h-4 w-4"});case"per_hour":return s.jsx(p,{className:"h-4 w-4"});case"fixed":return s.jsx(u,{className:"h-4 w-4"})}};return s.jsx(r,{title:"Цены дополнительных услуг",subtitle:"Управление ценами на дополнительные услуги",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(a,{className:"h-8 w-8 text-primary-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-mono-900",children:"Цены дополнительных услуг"}),s.jsxs("p",{className:"text-mono-600",children:["Всего услуг: ",y.length]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-mono-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),s.jsx("input",{type:"text",placeholder:"Поиск услуг...",value:f,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),s.jsxs("div",{className:"bg-white rounded-lg border border-mono-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:"Добавить новую услугу"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"Название услуги"}),s.jsx("input",{type:"text",value:N.name,onChange:e=>w(s=>({...s,name:e.target.value})),placeholder:"Например: Автобетононасос",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"Цена (₸)"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:N.price,onChange:e=>w(s=>({...s,price:parseFloat(e.target.value)||0})),placeholder:"0",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"Единица измерения"}),s.jsxs("select",{value:N.unit,onChange:e=>w(s=>({...s,unit:e.target.value})),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent",children:[s.jsx("option",{value:"per_m3",children:"за м³"}),s.jsx("option",{value:"per_hour",children:"за час"}),s.jsx("option",{value:"fixed",children:"за заказ"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:()=>{const e={id:Date.now().toString(),name:N.name,price:N.price,unit:N.unit};j(s=>[...s,e]),w({name:"",price:0,unit:"per_m3"})},disabled:!N.name||N.price<=0,className:"w-full px-4 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-300 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center gap-2",children:[s.jsx(l,{className:"h-4 w-4"}),"Добавить"]})})]})]}),s.jsx("div",{className:"bg-white rounded-lg border border-mono-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-mono-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-mono-500 uppercase tracking-wider",children:"Услуга"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-mono-500 uppercase tracking-wider",children:"Цена"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-mono-500 uppercase tracking-wider",children:"Единица"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-mono-500 uppercase tracking-wider",children:"Действия"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>s.jsxs("tr",{className:"hover:bg-mono-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g?.id===e.id?s.jsx("input",{type:"text",value:N.name,onChange:e=>w(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent"}):s.jsx("div",{className:"text-sm font-medium text-mono-900",children:e.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g?.id===e.id?s.jsx("input",{type:"number",min:"0",step:"0.01",value:N.price,onChange:e=>w(s=>({...s,price:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent"}):s.jsxs("div",{className:"text-sm text-mono-900 font-medium",children:[e.price.toLocaleString("ru-RU")," ₸"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g?.id===e.id?s.jsxs("select",{value:N.unit,onChange:e=>w(s=>({...s,unit:e.target.value})),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-transparent",children:[s.jsx("option",{value:"per_m3",children:"за м³"}),s.jsx("option",{value:"per_hour",children:"за час"}),s.jsx("option",{value:"fixed",children:"за заказ"})]}):s.jsxs("div",{className:"flex items-center text-sm text-mono-900",children:[S(e.unit),s.jsx("span",{className:"ml-1",children:_(e.unit)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:g?.id===e.id?s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:k,className:"text-mono-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Сохранить",children:s.jsx(i,{className:"h-4 w-4"})}),s.jsx("button",{onClick:C,className:"text-mono-600 hover:text-mono-900 p-1 rounded hover:bg-mono-50",title:"Отмена",children:s.jsx(d,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{v(e),w({name:e.name,price:e.price,unit:e.unit})})(e),className:"text-black hover:text-black p-1 rounded hover:bg-mono-50",title:"Редактировать",children:s.jsx(c,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{return s=e.id,void(window.confirm("Вы уверены, что хотите удалить эту услугу?")&&j(e=>e.filter(e=>e.id!==s)));var s},className:"text-mono-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Удалить",children:s.jsx(m,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),0===y.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"h-12 w-12 text-mono-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-mono-900 mb-2",children:f?"Услуги не найдены":"Нет услуг"}),s.jsx("p",{className:"text-mono-500",children:f?"Попробуйте изменить параметры поиска":"Добавьте первую услугу для начала работы"})]})]})})}export{h as default};
