import{j as e,a as t,P as s}from"./index-DssK2aQr.js";import{r as o}from"./vendor-CPG67Noa.js";import{M as n}from"./Modal-_SIwUgx5.js";import{P as l,Q as a,O as i,a as r,V as m,i as d}from"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";function c({isOpen:t,onClose:s,onSave:n,material:a,title:i}){const[r,m]=o.useState({name:"",type:"cement",unit:"ton"}),[d,c]=o.useState({});o.useEffect(()=>{m(a?{name:a.name,type:a.type,unit:a.unit}:{name:"",type:"cement",unit:"ton"}),c({})},[a,t]);const x=(e,t)=>{m(s=>({...s,[e]:t})),d[e]&&c(t=>({...t,[e]:""}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t={};r.name.trim()||(t.name="Название обязательно"),Object.keys(t).length>0?c(t):(n(r),s())},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-mono-700 mb-2",children:"Название *"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"text",id:"name",value:r.name,onChange:e=>x("name",e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 "+(d.name?"border-red-300":"border-mono-300"),placeholder:"Название материала"})]}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-mono-600",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-mono-700 mb-2",children:"Тип материала *"}),e.jsxs("select",{id:"type",value:r.type,onChange:e=>x("type",e.target.value),className:"w-full px-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"cement",children:"Цемент"}),e.jsx("option",{value:"sand",children:"Песок"}),e.jsx("option",{value:"gravel",children:"Щебень"}),e.jsx("option",{value:"water",children:"Вода"}),e.jsx("option",{value:"additive",children:"Добавка"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-mono-700 mb-2",children:"Единица измерения *"}),e.jsxs("select",{id:"unit",value:r.unit,onChange:e=>x("unit",e.target.value),className:"w-full px-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"kg",children:"кг"}),e.jsx("option",{value:"ton",children:"т"}),e.jsx("option",{value:"m3",children:"м³"}),e.jsx("option",{value:"liter",children:"л"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-mono-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-mono-700 bg-mono-100 hover:bg-mono-200 rounded-lg transition-colors duration-200",children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors duration-200",children:"Сохранить"})]})]})})}const x=[];function u(){const[u,p]=t("materials",x),[h,j]=o.useState(""),[g,b]=o.useState("all"),[v,f]=o.useState(!1),[N,y]=o.useState(null),[w,k]=o.useState(null),C=u.filter(e=>{const t=e.name.toLowerCase().includes(h.toLowerCase()),s="all"===g||e.type===g;return t&&s&&e.isActive}),S=e=>({cement:"Цемент",sand:"Песок",gravel:"Щебень",water:"Вода",additive:"Добавка",other:"Прочее"}[e]),O=e=>({kg:"кг",m3:"м³",ton:"т",liter:"л",piece:"шт"}[e]),A=()=>{f(!1),y(null)};return e.jsxs(s,{title:"Материалы",subtitle:"Управление сырьем и компонентами для производства бетона",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l,{className:"h-8 w-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-mono-900",children:"Материалы"}),e.jsxs("p",{className:"text-mono-600",children:["Всего: ",C.length]})]})]}),e.jsxs("button",{onClick:()=>{y(null),f(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors duration-200",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{children:"Добавить материал"})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-mono-200 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"text",placeholder:"Поиск по названию или характеристикам...",value:h,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>b("all"),className:"px-4 py-2 rounded-lg transition-colors duration-200 "+("all"===g?"bg-primary-500 text-white":"bg-mono-100 text-mono-700 hover:bg-mono-200"),children:"Все"}),["cement","sand","gravel","water","additive","other"].map(t=>e.jsx("button",{onClick:()=>b(t),className:"px-4 py-2 rounded-lg transition-colors duration-200 "+(g===t?"bg-primary-500 text-white":"bg-mono-100 text-mono-700 hover:bg-mono-200"),children:S(t)},t))]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C.map(t=>{return e.jsxs("div",{className:"bg-white rounded-lg border border-mono-200 p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("h3",{className:"text-lg font-semibold text-mono-900",children:t.name})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${s=t.type,{cement:"bg-mono-100 text-mono-800",sand:"bg-mono-200 text-mono-900",gravel:"bg-mono-300 text-black",water:"bg-mono-400 text-black",additive:"bg-mono-500 text-white",other:"bg-mono-100 text-mono-800"}[s]}`,children:S(t.type)}),e.jsx("span",{className:"text-sm text-mono-500",children:O(t.unit)})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>(e=>{k(e)})(t),className:"p-1 text-mono-400 hover:text-mono-600 transition-colors duration-200",title:"Просмотр",children:e.jsx(r,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{y(e),f(!0)})(t),className:"p-1 text-mono-400 hover:text-black transition-colors duration-200",title:"Редактировать",children:e.jsx(m,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{return e=t.id,void(window.confirm("Вы уверены, что хотите удалить этот материал?")&&p(t=>t.filter(t=>t.id!==e)));var e},className:"p-1 text-mono-400 hover:text-mono-600 transition-colors duration-200",title:"Удалить",children:e.jsx(d,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-3"})]},t.id);var s})}),0===C.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(l,{className:"mx-auto h-12 w-12 text-mono-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-mono-900",children:h||"all"!==g?"Материалы не найдены":"Нет материалов"}),e.jsx("p",{className:"mt-2 text-mono-600",children:h||"all"!==g?"Попробуйте изменить параметры поиска":"Добавьте первый материал для начала работы"})]})]}),e.jsx(n,{isOpen:v,onClose:A,title:N?"Редактировать материал":"Добавить материал",size:"lg",children:e.jsx(c,{isOpen:v,onClose:A,onSave:e=>{if(N)p(t=>t.map(t=>t.id===N.id?{...t,...e,updatedAt:(new Date).toISOString()}:t));else{const t={id:Date.now().toString(),...e,isActive:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};p(e=>[...e,t])}},material:N,title:N?"Редактировать материал":"Добавить материал"})}),e.jsx(n,{isOpen:!!w,onClose:()=>k(null),title:"Просмотр материала",size:"md",children:w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Название"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:w.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Тип"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:S(w.type)})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Единица измерения"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:O(w.unit)})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-mono-200",children:e.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 text-sm font-medium text-mono-700 bg-mono-100 hover:bg-mono-200 rounded-lg transition-colors duration-200",children:"Закрыть"})})]})})]})}export{u as default};
