import{j as e,a as s,P as t}from"./index-DssK2aQr.js";import{r as o}from"./vendor-CPG67Noa.js";import{M as n}from"./Modal-_SIwUgx5.js";import{a5 as r,P as a,a8 as l,a9 as i,aa as m,Q as d,O as c,a as x,V as p,i as u}from"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";function h({isOpen:s,onClose:t,onSave:n,concreteGrade:d,title:c}){const[x,p]=o.useState({name:"",grade:"",description:"",cementConsumption:0,gravelConsumption:0,sandConsumption:0,plasticizerConsumption:0}),[u,h]=o.useState({});o.useEffect(()=>{p(d?{name:d.name,grade:d.grade,description:d.description||"",cementConsumption:d.cementConsumption||0,gravelConsumption:d.gravelConsumption||0,sandConsumption:d.sandConsumption||0,plasticizerConsumption:d.plasticizerConsumption||0}:{name:"",grade:"",description:"",cementConsumption:0,gravelConsumption:0,sandConsumption:0,plasticizerConsumption:0}),h({})},[d,s]);const j=(e,s)=>{p(t=>({...t,[e]:s})),u[e]&&h(s=>({...s,[e]:""}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={};x.name.trim()||(s.name="Название обязательно"),x.grade.trim()||(s.grade="Марка обязательна"),Object.keys(s).length>0?h(s):(n(x),t())},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-mono-700 mb-2",children:"Название *"}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"text",id:"name",value:x.name,onChange:e=>j("name",e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 "+(u.name?"border-red-300":"border-mono-300"),placeholder:"М100"})]}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-mono-600",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-mono-700 mb-2",children:"Марка *"}),e.jsx("input",{type:"text",id:"grade",value:x.grade,onChange:e=>j("grade",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 "+(u.grade?"border-red-300":"border-mono-300"),placeholder:"М100"}),u.grade&&e.jsx("p",{className:"mt-1 text-sm text-mono-600",children:u.grade})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-mono-900 mb-4",children:"Расход материалов на 1 м³"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cementConsumption",className:"block text-sm font-medium text-mono-700 mb-2",children:"Расход цемента (кг)"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"number",id:"cementConsumption",value:x.cementConsumption,onChange:e=>j("cementConsumption",parseInt(e.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"300",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gravelConsumption",className:"block text-sm font-medium text-mono-700 mb-2",children:"Расход щебня (кг)"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"number",id:"gravelConsumption",value:x.gravelConsumption,onChange:e=>j("gravelConsumption",parseInt(e.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"1200",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sandConsumption",className:"block text-sm font-medium text-mono-700 mb-2",children:"Расход песка (кг)"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"number",id:"sandConsumption",value:x.sandConsumption,onChange:e=>j("sandConsumption",parseInt(e.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"600",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"plasticizerConsumption",className:"block text-sm font-medium text-mono-700 mb-2",children:"Расход пластификатора (л)"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"number",step:"0.1",id:"plasticizerConsumption",value:x.plasticizerConsumption,onChange:e=>j("plasticizerConsumption",parseFloat(e.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"2.5",min:"0"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-mono-700 mb-2",children:"Описание"}),e.jsx("textarea",{id:"description",value:x.description,onChange:e=>j("description",e.target.value),rows:3,className:"w-full px-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Описание применения бетона"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-mono-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-mono-700 bg-mono-100 hover:bg-mono-200 rounded-lg transition-colors duration-200",children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors duration-200",children:"Сохранить"})]})]})})}const j=[];function g(){const[a,l]=s("concreteGrades",j),[i,m]=o.useState(""),[g,b]=o.useState(!1),[f,v]=o.useState(null),[N,C]=o.useState(null),y=a.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.description?.toLowerCase().includes(i.toLowerCase())).sort((e,s)=>e.grade.localeCompare(s.grade)),w=()=>{b(!1),v(null)};return e.jsxs(t,{title:"Марки бетона",subtitle:"Управление номенклатурой бетонных смесей",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{className:"h-8 w-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-mono-900",children:"Марки бетона"}),e.jsxs("p",{className:"text-mono-600",children:["Всего: ",y.length]})]})]}),e.jsxs("button",{onClick:()=>{v(null),b(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors duration-200",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx("span",{children:"Добавить марку"})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-mono-200 p-4",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mono-400"}),e.jsx("input",{type:"text",placeholder:"Поиск по марке или описанию...",value:i,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-mono-200 p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx("h3",{className:"text-xl font-bold text-mono-900",children:s.grade})})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>(e=>{C(e)})(s),className:"p-1 text-mono-400 hover:text-mono-600 transition-colors duration-200",title:"Просмотр",children:e.jsx(x,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{v(e),b(!0)})(s),className:"p-1 text-mono-400 hover:text-black transition-colors duration-200",title:"Редактировать",children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{return e=s.id,void(window.confirm("Вы уверены, что хотите удалить эту марку бетона?")&&l(s=>s.filter(s=>s.id!==e)));var e},className:"p-1 text-mono-400 hover:text-mono-600 transition-colors duration-200",title:"Удалить",children:e.jsx(u,{className:"h-4 w-4"})})]})]}),s.description&&e.jsx("p",{className:"text-mono-600 mb-4",children:s.description})]},s.id))}),0===y.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(r,{className:"mx-auto h-12 w-12 text-mono-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-mono-900",children:i?"Марки бетона не найдены":"Нет марок бетона"}),e.jsx("p",{className:"mt-2 text-mono-600",children:i?"Попробуйте изменить параметры поиска":"Добавьте первую марку бетона для начала работы"})]})]}),e.jsx(n,{isOpen:g,onClose:w,title:f?"Редактировать марку бетона":"Добавить марку бетона",size:"lg",children:e.jsx(h,{isOpen:g,onClose:w,onSave:e=>{if(f)l(s=>s.map(s=>s.id===f.id?{...s,...e,updatedAt:(new Date).toISOString()}:s));else{const s={id:Date.now().toString(),...e,isActive:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};l(e=>[...e,s])}},concreteGrade:f,title:f?"Редактировать марку бетона":"Добавить марку бетона"})}),e.jsx(n,{isOpen:!!N,onClose:()=>C(null),title:"Просмотр марки бетона",size:"md",children:N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Название"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Марка"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.grade})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Цемент (кг)"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.cementConsumption||"Не указано"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Щебень (кг)"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.gravelConsumption||"Не указано"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Песок (кг)"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.sandConsumption||"Не указано"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Пластификатор (л)"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.plasticizerConsumption||"Не указано"})]})]}),N.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Описание"}),e.jsx("p",{className:"mt-1 text-sm text-mono-900",children:N.description})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-mono-200",children:e.jsx("button",{onClick:()=>C(null),className:"px-4 py-2 text-sm font-medium text-mono-700 bg-mono-100 hover:bg-mono-200 rounded-lg transition-colors duration-200",children:"Закрыть"})})]})})]})}export{g as default};
