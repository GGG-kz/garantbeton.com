import{u as e,a as s,j as t,U as l}from"./index-DssK2aQr.js";import{r as n,u as i}from"./vendor-CPG67Noa.js";import{f as o,a as d,c as a}from"./weighing-BTgEvgOj.js";import"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";const r=({currentWeight:l,onWeightChange:i,isConnected:a,onConnect:r,onGetWeight:c,isLoading:m})=>{const{user:x}=e(),[h,b]=n.useState(""),[g,u]=s("weighingDrafts",[]),[j,f]=n.useState(null),[N,p]=n.useState(null),[v,w]=n.useState(null);n.useEffect(()=>{if(N){const e=setTimeout(()=>p(null),5e3);return()=>clearTimeout(e)}},[N]),n.useEffect(()=>{if(v){const e=setTimeout(()=>w(null),3e3);return()=>clearTimeout(e)}},[v]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-mono-900 mb-2",children:"üöõ –í—ä–µ–∑–¥ (–ë—Ä—É—Ç—Ç–æ)"}),t.jsx("p",{className:"text-mono-600",children:"–í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω –ø—Ä–∏ –≤—ä–µ–∑–¥–µ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é"})]}),t.jsxs("div",{className:"p-4 bg-mono-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-mono-700",children:"–°—Ç–∞—Ç—É—Å –≤–µ—Å–æ–≤:"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-mono-500"}),t.jsx("span",{className:"text-sm font-medium "+(a?"text-mono-700":"text-red-700"),children:a?"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ":"–û—Ç–∫–ª—é—á–µ–Ω–æ"})]})]}),!a&&t.jsx("button",{onClick:r,disabled:m,className:"mt-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:m?"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å"})]}),t.jsxs("div",{className:"p-6 bg-mono-50 border border-mono-200 rounded-lg text-center",children:[t.jsx("div",{className:"text-sm text-black mb-2",children:"–¢–µ–∫—É—â–∏–π –≤–µ—Å:"}),t.jsx("div",{className:"text-4xl font-bold text-black",children:l?o(l):"---"}),a&&t.jsx("button",{onClick:c,disabled:m,className:"mt-4 px-6 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:m?"–ü–æ–ª—É—á–µ–Ω–∏–µ...":"‚öñÔ∏è –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Å"})]}),t.jsxs("div",{className:"p-4 bg-white border border-mono-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä:"}),t.jsx("input",{type:"text",value:h,onChange:e=>b(e.target.value.toUpperCase()),placeholder:"–ê123–ë–í777",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",disabled:!!j})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>{if(!h.trim())return void p("–í–≤–µ–¥–∏—Ç–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä");if(!l)return void p("–ü–æ–ª—É—á–∏—Ç–µ –≤–µ—Å –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏");if(!x)return void p("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");if(g.find(e=>e.vehicleNumber===h.trim()&&"draft"===e.status))return void p("–î–ª—è —ç—Ç–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å");const e={id:`draft_${Date.now()}`,vehicleNumber:h.trim().toUpperCase(),grossWeight:l,grossTimestamp:(new Date).toISOString(),status:"draft",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),operatorId:x.id,operatorName:x.fullName||x.login||"–û–ø–µ—Ä–∞—Ç–æ—Ä"};u([e,...g]),f(e),b(""),w("–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!")},disabled:!(l&&h.trim()&&!j&&a),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-mono-400 transition-colors",children:"üìù –î–æ–±–∞–≤–∏—Ç—å"}),j&&t.jsx("button",{onClick:()=>{if(!j)return void p("–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");const e=g.map(e=>e.id===j.id?{...e,updatedAt:(new Date).toISOString()}:e);u(e),f(null),w("–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!")},className:"flex-1 px-4 py-2 bg-black text-white rounded-lg hover:bg-black transition-colors",children:"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (—á–µ—Ä–Ω–æ–≤–∏–∫)"})]})]})]}),j&&t.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-3",children:"üöß –ê–∫—Ç–∏–≤–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ù–æ–º–µ—Ä:"}),t.jsx("div",{className:"text-lg font-bold text-mono-900",children:j.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ë—Ä—É—Ç—Ç–æ:"}),t.jsx("div",{className:"text-lg font-bold text-mono-600",children:o(j.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞:"}),t.jsx("div",{className:"text-mono-900",children:d(j.grossTimestamp)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–û–ø–µ—Ä–∞—Ç–æ—Ä:"}),t.jsx("div",{className:"text-mono-900",children:j.operatorName})]})]})]}),g.filter(e=>"draft"===e.status).length>0&&t.jsxs("div",{className:"p-4 bg-white border border-mono-200 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:["üìã –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (",g.filter(e=>"draft"===e.status).length,")"]}),t.jsx("div",{className:"space-y-3",children:g.filter(e=>"draft"===e.status).map(e=>t.jsx("div",{className:"p-3 bg-mono-50 border border-mono-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ù–æ–º–µ—Ä:"}),t.jsx("span",{className:"ml-2 font-bold text-mono-900",children:e.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ë—Ä—É—Ç—Ç–æ:"}),t.jsx("span",{className:"ml-2 font-bold text-mono-600",children:o(e.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–í—Ä–µ–º—è:"}),t.jsx("span",{className:"ml-2 text-mono-900",children:d(e.grossTimestamp)})]})]})}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>(e=>{f(e),b(e.vehicleNumber),w("–ß–µ—Ä–Ω–æ–≤–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã")})(e),className:"px-3 py-1 bg-black text-white text-sm rounded hover:bg-black transition-colors",children:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"}),t.jsx("button",{onClick:()=>(e=>{if(window.confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫?")){const s=g.filter(s=>s.id!==e);u(s),j?.id===e&&f(null),w("–ß–µ—Ä–Ω–æ–≤–∏–∫ —É–¥–∞–ª–µ–Ω!")}})(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"–£–¥–∞–ª–∏—Ç—å"})]})]})},e.id))})]}),N&&t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("span",{className:"text-mono-600",children:["‚ùå ",N]})})}),v&&t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("span",{className:"text-mono-600",children:["‚úÖ ",v]})})})]})},c=({currentWeight:l,onWeightChange:i,isConnected:r,onConnect:c,onGetWeight:m,isLoading:x})=>{const{user:h}=e(),[b,g]=s("weighingDrafts",[]),[u,j]=n.useState(null),[f,N]=n.useState(""),[p,v]=n.useState(null),[w,y]=n.useState(null),[k,C]=n.useState(""),[W,S]=n.useState(""),[D,T]=n.useState(""),[E,I]=n.useState("");n.useEffect(()=>{if(p){const e=setTimeout(()=>v(null),5e3);return()=>clearTimeout(e)}},[p]),n.useEffect(()=>{if(w){const e=setTimeout(()=>y(null),3e3);return()=>clearTimeout(e)}},[w]);const O=e=>{const s=b.find(s=>s.vehicleNumber===e.trim().toUpperCase()&&"draft"===s.status);s?(j(s),C(""),S(""),T(""),I(""),y("–ß–µ—Ä–Ω–æ–≤–∏–∫ –Ω–∞–π–¥–µ–Ω!")):v("–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω")},A=b.filter(e=>"draft"===e.status);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-mono-900 mb-2",children:"üöö –í—ã–µ–∑–¥ (–¢–∞—Ä–∞)"}),t.jsx("p",{className:"text-mono-600",children:"–í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω –ø–æ—Å–ª–µ —Ä–∞–∑–≥—Ä—É–∑–∫–∏"})]}),t.jsxs("div",{className:"p-4 bg-mono-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-mono-700",children:"–°—Ç–∞—Ç—É—Å –≤–µ—Å–æ–≤:"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-mono-500"}),t.jsx("span",{className:"text-sm font-medium "+(r?"text-mono-700":"text-red-700"),children:r?"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ":"–û—Ç–∫–ª—é—á–µ–Ω–æ"})]})]}),!r&&t.jsx("button",{onClick:c,disabled:x,className:"mt-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:x?"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å"})]}),t.jsxs("div",{className:"p-6 bg-mono-50 border border-mono-200 rounded-lg text-center",children:[t.jsx("div",{className:"text-sm text-black mb-2",children:"–¢–µ–∫—É—â–∏–π –≤–µ—Å (—Ç–∞—Ä–∞):"}),t.jsx("div",{className:"text-4xl font-bold text-black",children:l?o(l):"---"}),r&&t.jsx("button",{onClick:m,disabled:x,className:"mt-4 px-6 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:x?"–ü–æ–ª—É—á–µ–Ω–∏–µ...":"‚öñÔ∏è –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Å"})]}),t.jsxs("div",{className:"p-4 bg-white border border-mono-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:"–ù–∞–π—Ç–∏ —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ –Ω–æ–º–µ—Ä—É"}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("input",{type:"text",value:f,onChange:e=>N(e.target.value.toUpperCase()),placeholder:"–ê123–ë–í777",className:"flex-1 px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500"}),t.jsx("button",{onClick:()=>O(f),disabled:!f.trim(),className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:"üîç –ù–∞–π—Ç–∏"})]})]}),u&&t.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"üìã –í—ã–±—Ä–∞–Ω–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ù–æ–º–µ—Ä:"}),t.jsx("div",{className:"text-lg font-bold text-mono-900",children:u.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ë—Ä—É—Ç—Ç–æ:"}),t.jsx("div",{className:"text-lg font-bold text-mono-600",children:o(u.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞:"}),t.jsx("div",{className:"text-mono-900",children:d(u.grossTimestamp)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–û–ø–µ—Ä–∞—Ç–æ—Ä:"}),t.jsx("div",{className:"text-mono-900",children:u.operatorName})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"–ü–æ—Å—Ç–∞–≤—â–∏–∫:"}),t.jsx("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"–û–û–û –ü–æ—Å—Ç–∞–≤—â–∏–∫",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"–ü–æ–ª—É—á–∞—Ç–µ–ª—å:"}),t.jsx("input",{type:"text",value:W,onChange:e=>S(e.target.value),placeholder:"–û–û–û –ü–æ–ª—É—á–∞—Ç–µ–ª—å",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"–¢–∏–ø –≥—Ä—É–∑–∞:"}),t.jsx("input",{type:"text",value:D,onChange:e=>T(e.target.value),placeholder:"–ü–µ—Å–æ–∫, —â–µ–±–µ–Ω—å, –±–µ—Ç–æ–Ω...",className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:"}),t.jsx("textarea",{value:E,onChange:e=>I(e.target.value),placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...",rows:3,className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500"})]}),l&&t.jsxs("div",{className:"p-3 bg-mono-50 border border-mono-200 rounded-lg",children:[t.jsx("div",{className:"text-sm font-medium text-black mb-2",children:"–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç:"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ë—Ä—É—Ç—Ç–æ:"}),t.jsx("div",{className:"font-bold text-mono-600",children:o(u.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–¢–∞—Ä–∞:"}),t.jsx("div",{className:"font-bold text-black",children:o(l)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ù–µ—Ç—Ç–æ:"}),t.jsx("div",{className:"font-bold text-purple-600",children:o(a(u.grossWeight,l))})]})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>{if(!u)return void v("–í—ã–±–µ—Ä–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è");if(!l)return void v("–ü–æ–ª—É—á–∏—Ç–µ –≤–µ—Å –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏");if(!h)return void v("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");const e=a(u.grossWeight,l),s={...u,tareWeight:l,tareTimestamp:(new Date).toISOString(),netWeight:e,supplier:k.trim()||void 0,recipient:W.trim()||void 0,cargoType:D.trim()||void 0,notes:E.trim()||void 0,status:"completed",updatedAt:(new Date).toISOString()},t=b.map(e=>e.id===u.id?s:e);g(t),j(null),N(""),C(""),S(""),T(""),I(""),y("–í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!")},disabled:!l||!r,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-mono-400 transition-colors font-medium",children:"‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),t.jsx("button",{onClick:()=>{j(null),N(""),C(""),S(""),T(""),I("")},className:"px-6 py-3 bg-mono-600 text-white rounded-lg hover:bg-mono-700 transition-colors",children:"–û—Ç–º–µ–Ω–∞"})]})]})]}),A.length>0&&t.jsxs("div",{className:"p-4 bg-white border border-mono-200 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:["üìã –û–∂–∏–¥–∞—é—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (",A.length,")"]}),t.jsx("div",{className:"space-y-3",children:A.map(e=>t.jsx("div",{className:"p-3 bg-mono-50 border border-mono-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ù–æ–º–µ—Ä:"}),t.jsx("span",{className:"ml-2 font-bold text-mono-900",children:e.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–ë—Ä—É—Ç—Ç–æ:"}),t.jsx("span",{className:"ml-2 font-bold text-mono-600",children:o(e.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞:"}),t.jsx("span",{className:"ml-2 text-mono-900",children:d(e.grossTimestamp)})]})]})}),t.jsx("button",{onClick:()=>{N(e.vehicleNumber),O(e.vehicleNumber)},className:"px-3 py-1 bg-black text-white text-sm rounded hover:bg-black transition-colors",children:"–í—ã–±—Ä–∞—Ç—å"})]})},e.id))})]}),p&&t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("span",{className:"text-mono-600",children:["‚ùå ",p]})})}),w&&t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("span",{className:"text-mono-600",children:["‚úÖ ",w]})})})]})},m=()=>{const o=i(),{user:d}=e(),[a,m]=n.useState("arrival"),[x]=s("weighingDrafts",[]),[h,b]=n.useState(!1),[g,u]=n.useState(null),[j,f]=n.useState(!1),[N,p]=n.useState(null);n.useEffect(()=>{d&&![l.ADMIN,l.DEVELOPER,l.DISPATCHER,l.OPERATOR].includes(d.role)&&o("/dashboard")},[d,o]);const v={totalDrafts:x.length,completedWeighings:x.filter(e=>"completed"===e.status).length,pendingDrafts:x.filter(e=>"draft"===e.status).length,totalWeight:x.filter(e=>"completed"===e.status&&e.netWeight).reduce((e,s)=>e+(s.netWeight||0),0),averageWeight:0};v.completedWeighings>0&&(v.averageWeight=v.totalWeight/v.completedWeighings);const w=async()=>{f(!0),p(null);try{await new Promise(e=>setTimeout(e,1e3)),b(!0)}catch(e){p(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${e instanceof Error?e.message:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"}`),b(!1)}finally{f(!1)}},y=async()=>{if(h){f(!0);try{p("–§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Å–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –≤–µ—Å–∞–º")}catch(e){p(`–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Å–∞: ${e instanceof Error?e.message:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"}`)}finally{f(!1)}}else p("–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–µ—Å–∞–º")};return d?t.jsxs("div",{className:"min-h-screen bg-mono-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>o("/dashboard"),className:"inline-flex items-center px-4 py-2 bg-mono-600 text-white rounded-lg hover:bg-mono-700 transition-colors",children:"‚Üê –ù–∞–∑–∞–¥ –∫ Dashboard"}),t.jsx("h1",{className:"text-2xl font-bold text-mono-900",children:"‚öñÔ∏è –°–∏—Å—Ç–µ–º–∞ –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"text-sm text-mono-600",children:["–û–ø–µ—Ä–∞—Ç–æ—Ä: ",t.jsx("span",{className:"font-medium",children:d.fullName||d.login})]})})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex space-x-1 bg-mono-100 p-1 rounded-lg w-fit",children:[t.jsx("button",{onClick:()=>m("arrival"),className:"px-6 py-3 rounded-md font-medium transition-colors "+("arrival"===a?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"üöõ –í—ä–µ–∑–¥ (–ë—Ä—É—Ç—Ç–æ)"}),t.jsx("button",{onClick:()=>m("departure"),className:"px-6 py-3 rounded-md font-medium transition-colors "+("departure"===a?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"üöö –í—ã–µ–∑–¥ (–¢–∞—Ä–∞)"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-mono-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-black font-bold",children:"üìã"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-mono-500",children:"–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π"}),t.jsx("div",{className:"text-2xl font-bold text-mono-900",children:v.totalDrafts})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-mono-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-mono-600 font-bold",children:"‚úÖ"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-mono-500",children:"–ó–∞–≤–µ—Ä—à–µ–Ω–æ"}),t.jsx("div",{className:"text-2xl font-bold text-mono-900",children:v.completedWeighings})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-mono-600 font-bold",children:"‚è≥"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-mono-500",children:"–í –ø—Ä–æ—Ü–µ—Å—Å–µ"}),t.jsx("div",{className:"text-2xl font-bold text-mono-900",children:v.pendingDrafts})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-mono-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-black font-bold",children:"‚öñÔ∏è"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-mono-500",children:"–û–±—â–∏–π –≤–µ—Å"}),t.jsxs("div",{className:"text-2xl font-bold text-mono-900",children:[v.totalWeight.toFixed(0)," –∫–≥"]})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:t.jsxs("div",{className:"p-6",children:["arrival"===a?t.jsx(r,{currentWeight:g,onWeightChange:u,isConnected:h,onConnect:w,onGetWeight:y,isLoading:j}):t.jsx(c,{currentWeight:g,onWeightChange:u,isConnected:h,onConnect:w,onGetWeight:y,isLoading:j}),N&&t.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("span",{className:"text-mono-600",children:["‚ùå ",N]})})})]})}),t.jsxs("div",{className:"mt-8 bg-mono-50 border border-mono-200 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-black mb-2",children:"üöõ –í—ä–µ–∑–¥ (–ë—Ä—É—Ç—Ç–æ):"}),t.jsxs("ol",{className:"text-sm text-black space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"–ù–∞–∂–∞—Ç—å ¬´–î–æ–±–∞–≤–∏—Ç—å¬ª ‚Üí —É–∫–∞–∑–∞—Ç—å –≥–æ—Å. –Ω–æ–º–µ—Ä"}),t.jsx("li",{children:"–ù–∞–∂–∞—Ç—å ¬´–ë–†–£–¢–¢–û¬ª ‚Üí —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤–µ—Å + –¥–∞—Ç–∞/–≤—Ä–µ–º—è"}),t.jsx("li",{children:"–ù–∞–∂–∞—Ç—å ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å (—á–µ—Ä–Ω–æ–≤–∏–∫)¬ª"}),t.jsx("li",{children:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–∞—à–∏–Ω"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-black mb-2",children:"üöö –í—ã–µ–∑–¥ (–¢–∞—Ä–∞):"}),t.jsxs("ol",{className:"text-sm text-black space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"–û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ –Ω–æ–º–µ—Ä—É"}),t.jsx("li",{children:"–ù–∞–∂–∞—Ç—å ¬´–¢–ê–†–ê¬ª ‚Üí —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤–µ—Å + –¥–∞—Ç–∞/–≤—Ä–µ–º—è"}),t.jsx("li",{children:"–ó–∞–ø–æ–ª–Ω–∏—Ç—å: –ø–æ—Å—Ç–∞–≤—â–∏–∫, –ø–æ–ª—É—á–∞—Ç–µ–ª—å, –≥—Ä—É–∑"}),t.jsx("li",{children:"–ù–µ—Ç—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –±—Ä—É—Ç—Ç–æ ‚Äì —Ç–∞—Ä–∞"}),t.jsx("li",{children:"–ù–∞–∂–∞—Ç—å ¬´–û–±–Ω–æ–≤–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª"})]})]})]})]})]})]}):t.jsx("div",{className:"min-h-screen bg-mono-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-mono-900",children:"–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"}),t.jsx("p",{className:"text-mono-600 mt-2",children:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É"})]})})};export{m as default};
