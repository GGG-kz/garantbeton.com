import{u as e,j as s,P as t}from"./index-DssK2aQr.js";import{r}from"./vendor-CPG67Noa.js";import{b as a,v as l,w as o,x as n,y as c,E as i,a as m}from"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";function d(){const{user:d}=e(),x=r.useRef(null),[u,b]=r.useState({fullName:d?.fullName||"",email:d?.email||""}),[h,f]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,j]=r.useState(d?.avatar||null),[w,N]=r.useState({current:!1,new:!1,confirm:!1}),[g,v]=r.useState(!1),[y,k]=r.useState(null),P=e=>{N(s=>({...s,[e]:!s[e]}))};return d?s.jsxs(t,{title:"Профиль пользователя",subtitle:"Управление личными данными и настройками безопасности",children:[y&&s.jsx("div",{className:"mb-6 p-4 rounded-lg "+("success"===y.type?"bg-mono-100 text-mono-800 border border-mono-200":"bg-mono-100 text-mono-900 border border-mono-300"),children:y.text}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-mono-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-black mb-6",children:"Личная информация"}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),v(!0),k(null);try{k({type:"success",text:"Профиль успешно обновлен"})}catch(s){k({type:"error",text:"Ошибка при обновлении профиля"})}finally{v(!1)}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-black mb-2",children:"ФИО"}),s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-mono-400"}),s.jsx("input",{type:"text",id:"fullName",value:u.fullName,onChange:e=>b(s=>({...s,fullName:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-black",placeholder:"Введите ваше ФИО"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-black mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-mono-400"}),s.jsx("input",{type:"email",id:"email",value:u.email,onChange:e=>b(s=>({...s,email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-black",placeholder:"Введите ваш email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Аватар"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"relative",children:p?s.jsx("img",{src:p,alt:"Аватар",className:"h-20 w-20 rounded-full object-cover border-2 border-mono-200"}):s.jsx("div",{className:"h-20 w-20 rounded-full bg-mono-200 flex items-center justify-center",children:s.jsx(a,{className:"h-8 w-8 text-mono-400"})})}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>x.current?.click(),className:"flex items-center space-x-2 px-4 py-2 bg-black hover:bg-mono-800 text-white rounded-lg transition-colors duration-200",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx("span",{children:"Выбрать фото"})]}),s.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{const s=e.target.files?.[0];if(s){if(!s.type.startsWith("image/"))return void k({type:"error",text:"Пожалуйста, выберите изображение"});if(s.size>5242880)return void k({type:"error",text:"Размер файла не должен превышать 5MB"});const e=new FileReader;e.onload=e=>{j(e.target?.result)},e.readAsDataURL(s)}},className:"hidden"})]})]}),s.jsx("p",{className:"text-sm text-mono-500 mt-2",children:"Рекомендуемый размер: 200x200px. Максимальный размер: 5MB"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:g,className:"flex items-center space-x-2 px-6 py-3 bg-black hover:bg-mono-800 disabled:bg-mono-300 text-white rounded-lg transition-colors duration-200",children:[s.jsx(n,{className:"h-4 w-4"}),s.jsx("span",{children:g?"Сохранение...":"Сохранить"})]})})]})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-mono-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-black mb-6",children:"Смена пароля"}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v(!0),k(null),h.newPassword!==h.confirmPassword)return k({type:"error",text:"Новые пароли не совпадают"}),void v(!1);if(h.newPassword.length<6)return k({type:"error",text:"Новый пароль должен содержать минимум 6 символов"}),void v(!1);try{k({type:"success",text:"Пароль успешно изменен"}),f({currentPassword:"",newPassword:"",confirmPassword:""})}catch(s){k({type:"error",text:"Ошибка при смене пароля"})}finally{v(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-black mb-2",children:"Текущий пароль"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-mono-400"}),s.jsx("input",{type:w.current?"text":"password",id:"currentPassword",value:h.currentPassword,onChange:e=>f(s=>({...s,currentPassword:e.target.value})),className:"w-full pl-10 pr-10 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-black",placeholder:"Введите текущий пароль"}),s.jsx("button",{type:"button",onClick:()=>P("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-mono-400 hover:text-mono-600",children:w.current?s.jsx(i,{className:"h-5 w-5"}):s.jsx(m,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-black mb-2",children:"Новый пароль"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-mono-400"}),s.jsx("input",{type:w.new?"text":"password",id:"newPassword",value:h.newPassword,onChange:e=>f(s=>({...s,newPassword:e.target.value})),className:"w-full pl-10 pr-10 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-black",placeholder:"Введите новый пароль"}),s.jsx("button",{type:"button",onClick:()=>P("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-mono-400 hover:text-mono-600",children:w.new?s.jsx(i,{className:"h-5 w-5"}):s.jsx(m,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-black mb-2",children:"Подтвердите пароль"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-mono-400"}),s.jsx("input",{type:w.confirm?"text":"password",id:"confirmPassword",value:h.confirmPassword,onChange:e=>f(s=>({...s,confirmPassword:e.target.value})),className:"w-full pl-10 pr-10 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-black",placeholder:"Повторите новый пароль"}),s.jsx("button",{type:"button",onClick:()=>P("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-mono-400 hover:text-mono-600",children:w.confirm?s.jsx(i,{className:"h-5 w-5"}):s.jsx(m,{className:"h-5 w-5"})})]})]}),s.jsxs("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-black hover:bg-mono-800 disabled:bg-mono-300 text-white rounded-lg transition-colors duration-200",children:[s.jsx(c,{className:"h-4 w-4"}),s.jsx("span",{children:g?"Смена пароля...":"Изменить пароль"})]})]})]})})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-black mb-4",children:"Доступ запрещен"}),s.jsx("p",{className:"text-mono-600",children:"Необходимо войти в систему"})]})})}export{d as default};
