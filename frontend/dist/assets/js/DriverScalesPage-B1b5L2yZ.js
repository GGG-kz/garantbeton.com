import{u as e,a as s,j as t,U as n}from"./index-DssK2aQr.js";import{r as l,u as o}from"./vendor-CPG67Noa.js";import{f as a,a as i,c as d}from"./weighing-BTgEvgOj.js";import"./ui-DT0cN5GG.js";import"./utils-CHM7ATol.js";import"./forms-BH-hazHY.js";const r=({currentWeight:n,onWeightChange:o,isConnected:r,onConnect:c,onGetWeight:m,isLoading:x})=>{const{user:h}=e(),[u,g]=l.useState("arrival"),[b,p]=s("driverWeighingDrafts",[]),[j,f]=l.useState(null),[v,N]=l.useState(""),[w,y]=l.useState(""),[k,S]=l.useState(null),[C,W]=l.useState(null);l.useEffect(()=>{if(k){const e=setTimeout(()=>S(null),5e3);return()=>clearTimeout(e)}},[k]),l.useEffect(()=>{if(C){const e=setTimeout(()=>W(null),3e3);return()=>clearTimeout(e)}},[C]);const T={totalTrips:b.filter(e=>"completed"===e.status).length,pendingTrips:b.filter(e=>"draft"===e.status).length,totalWeight:b.filter(e=>"completed"===e.status&&e.netWeight).reduce((e,s)=>e+(s.netWeight||0),0)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-mono-900 mb-2",children:"🚛 Взвешивание для водителей"}),t.jsx("p",{className:"text-mono-600",children:"Быстрое взвешивание при въезде и выезде"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-mono-600",children:T.totalTrips}),t.jsx("div",{className:"text-sm text-mono-700",children:"Завершено"})]}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-mono-600",children:T.pendingTrips}),t.jsx("div",{className:"text-sm text-yellow-700",children:"В процессе"})]}),t.jsxs("div",{className:"bg-mono-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-black",children:T.totalWeight.toFixed(0)}),t.jsx("div",{className:"text-sm text-black",children:"кг всего"})]})]}),t.jsxs("div",{className:"flex space-x-1 bg-mono-100 p-1 rounded-lg",children:[t.jsx("button",{onClick:()=>g("arrival"),className:"flex-1 py-3 px-4 rounded-md font-medium transition-colors "+("arrival"===u?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"🚛 Въезд"}),t.jsx("button",{onClick:()=>g("departure"),className:"flex-1 py-3 px-4 rounded-md font-medium transition-colors "+("departure"===u?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"🚚 Выезд"})]}),t.jsxs("div",{className:"p-4 bg-mono-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-mono-700",children:"Статус весов:"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-mono-500"}),t.jsx("span",{className:"text-sm font-medium "+(r?"text-mono-700":"text-red-700"),children:r?"Подключено":"Отключено"})]})]}),!r&&t.jsx("button",{onClick:c,disabled:x,className:"mt-2 w-full px-4 py-2 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:x?"Подключение...":"Подключить к весам"})]}),t.jsxs("div",{className:"p-6 bg-mono-50 border border-mono-200 rounded-lg text-center",children:[t.jsx("div",{className:"text-sm text-black mb-2",children:"Текущий вес:"}),t.jsx("div",{className:"text-4xl font-bold text-black",children:n?a(n):"---"}),r&&t.jsx("button",{onClick:m,disabled:x,className:"mt-4 w-full px-6 py-3 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors font-medium",children:x?"Получение...":"⚖️ Получить вес"})]}),"arrival"===u&&t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"🚛 Въезд на территорию"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"Номер вашего автомобиля:"}),t.jsx("input",{type:"text",value:v,onChange:e=>N(e.target.value.toUpperCase()),placeholder:"А123БВ777",className:"w-full px-4 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg",disabled:!!j})]}),t.jsx("button",{onClick:()=>{if(!v.trim())return void S("Введите номер вашего автомобиля");if(!n)return void S("Получите вес перед созданием записи");if(!h)return void S("Пользователь не авторизован");if(b.find(e=>e.vehicleNumber===v.trim()&&"draft"===e.status))return void S("Для вашего автомобиля уже есть незавершенная запись");const e={id:`draft_${Date.now()}`,vehicleNumber:v.trim().toUpperCase(),grossWeight:n,grossTimestamp:(new Date).toISOString(),status:"draft",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),operatorId:h.id,operatorName:h.fullName||h.login||"Водитель"};p([e,...b]),f(e),N(""),W("✅ Запись въезда создана! Можете ехать на разгрузку.")},disabled:!(n&&v.trim()&&!j&&r),className:"w-full px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-mono-400 transition-colors font-medium text-lg",children:"📝 Зафиксировать въезд"}),j&&t.jsx("div",{className:"p-3 bg-white border border-green-300 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-bold text-green-800 mb-2",children:"✅ Въезд зафиксирован!"}),t.jsxs("div",{className:"text-sm text-mono-700",children:["Номер: ",t.jsx("span",{className:"font-bold",children:j.vehicleNumber})]}),t.jsxs("div",{className:"text-sm text-mono-700",children:["Вес: ",t.jsx("span",{className:"font-bold",children:a(j.grossWeight)})]}),t.jsxs("div",{className:"text-sm text-mono-700",children:["Время: ",t.jsx("span",{className:"font-bold",children:i(j.grossTimestamp)})]}),t.jsx("div",{className:"mt-3 text-sm text-mono-600 font-medium",children:"Можете ехать на разгрузку"})]})})]})]}),"departure"===u&&t.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"🚚 Выезд с территории"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-2",children:"Номер вашего автомобиля:"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"text",value:w,onChange:e=>y(e.target.value.toUpperCase()),placeholder:"А123БВ777",className:"flex-1 px-4 py-3 border border-mono-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-lg"}),t.jsx("button",{onClick:()=>{if(!w.trim())return void S("Введите номер вашего автомобиля");const e=b.find(e=>e.vehicleNumber===w.trim().toUpperCase()&&"draft"===e.status);e?(f(e),W("✅ Ваш автомобиль найден! Можете взвешиваться на выезде.")):S("❌ Запись въезда не найдена. Проверьте номер автомобиля.")},disabled:!w.trim(),className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-mono-400 transition-colors font-medium",children:"🔍 Найти"})]})]}),j&&t.jsx("div",{className:"p-4 bg-white border border-orange-300 rounded-lg",children:t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"text-lg font-bold text-orange-800 mb-2",children:"📋 Ваш автомобиль найден"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Номер:"}),t.jsx("div",{className:"font-bold text-mono-900",children:j.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Въезд:"}),t.jsx("div",{className:"font-bold text-mono-600",children:a(j.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Время въезда:"}),t.jsx("div",{className:"text-mono-900",children:i(j.grossTimestamp)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Текущий вес:"}),t.jsx("div",{className:"font-bold text-black",children:n?a(n):"---"})]})]}),n&&t.jsxs("div",{className:"mt-4 p-3 bg-mono-50 border border-mono-200 rounded-lg",children:[t.jsx("div",{className:"text-sm font-medium text-black mb-2",children:"Расчет:"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Въезд:"}),t.jsx("div",{className:"font-bold text-mono-600",children:a(j.grossWeight)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Выезд:"}),t.jsx("div",{className:"font-bold text-black",children:a(n)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Груз:"}),t.jsx("div",{className:"font-bold text-purple-600",children:a(d(j.grossWeight,n))})]})]})]}),t.jsx("button",{onClick:()=>{if(!j)return void S("Выберите запись для завершения");if(!n)return void S("Получите вес перед завершением");const e=d(j.grossWeight,n),s={...j,tareWeight:n,tareTimestamp:(new Date).toISOString(),netWeight:e,status:"completed",updatedAt:(new Date).toISOString()},t=b.map(e=>e.id===j.id?s:e);p(t),f(null),y(""),W("🎉 Взвешивание завершено! Можете покинуть территорию.")},disabled:!n||!r,className:"mt-4 w-full px-6 py-4 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-mono-400 transition-colors font-medium text-lg",children:"✅ Завершить взвешивание"})]})})]})]}),b.length>0&&t.jsxs("div",{className:"p-4 bg-white border border-mono-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-mono-900 mb-4",children:"📋 История взвешиваний"}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:b.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,10).map(e=>t.jsx("div",{className:"p-3 rounded-lg border "+("completed"===e.status?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"),children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Номер:"}),t.jsx("span",{className:"ml-1 font-bold",children:e.vehicleNumber})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Въезд:"}),t.jsx("span",{className:"ml-1 font-bold text-mono-600",children:a(e.grossWeight)})]}),e.tareWeight&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Выезд:"}),t.jsx("span",{className:"ml-1 font-bold text-black",children:a(e.tareWeight)})]}),e.netWeight&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-mono-700",children:"Груз:"}),t.jsx("span",{className:"ml-1 font-bold text-purple-600",children:a(e.netWeight)})]})]}),t.jsx("div",{className:"px-2 py-1 rounded text-xs font-medium "+("completed"===e.status?"bg-mono-100 text-mono-700":"bg-yellow-100 text-yellow-700"),children:"completed"===e.status?"Завершено":"В процессе"})]})},e.id))})]}),k&&t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"text-mono-600 font-medium",children:k})})}),C&&t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"text-mono-600 font-medium",children:C})})})]})},c=()=>{const s=o(),{user:a}=e(),[i,d]=l.useState("https://your-cloud-server.com:3001"),[c,m]=l.useState("cloud"),[x,h]=l.useState(!1),[u,g]=l.useState(null),[b,p]=l.useState(!1),[j,f]=l.useState(null),[v,N]=l.useState([]),[w,y]=l.useState(""),[k,S]=l.useState(""),[C,W]=l.useState(""),[T,$]=l.useState(""),[E,D]=l.useState("checking"),[I,F]=l.useState("simple");l.useEffect(()=>{const e=()=>{navigator.onLine?fetch("http://192.168.1.100:8080/status",{method:"HEAD",mode:"no-cors"}).then(()=>{D("wifi"),m("local"),d("http://192.168.1.100:8080")}).catch(()=>{D("mobile"),m("cloud"),d("https://your-cloud-server.com:3001")}):D("offline")};e();const s=setInterval(e,3e4);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{clearInterval(s),window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),l.useEffect(()=>{a&&a.role!==n.DRIVER&&s("/dashboard")},[a,s]);const O=async()=>{p(!0),f(null);try{const e="cloud"===c?"/cloud/status":"/status",s=await fetch(`${i}${e}`);if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);{const e=await s.json();h(e.scales_connected||"online"===e.local_server_status),null!==e.last_weight&&g(e.last_weight)}}catch(e){f(`Ошибка подключения: ${e instanceof Error?e.message:"Неизвестная ошибка"}`),h(!1)}finally{p(!1)}},L=async()=>{if(x){p(!0);try{const e="cloud"===c?"/cloud/weight":"/weight",s=await fetch(`${i}${e}`);if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);{const e=await s.json();g(e.value),f(null)}}catch(e){f(`Ошибка получения веса: ${e instanceof Error?e.message:"Неизвестная ошибка"}`)}finally{p(!1)}}else f("Нет подключения к весам")};return l.useEffect(()=>{const e=localStorage.getItem("driverWeighingHistory");if(e)try{const s=JSON.parse(e);N(s.map(e=>({...e,timestamp:new Date(e.timestamp)})))}catch(s){}},[]),t.jsx("div",{className:"min-h-screen bg-mono-50 p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("button",{onClick:()=>s("/dashboard"),className:"mb-4 inline-flex items-center px-4 py-2 bg-mono-600 text-white rounded-lg hover:bg-mono-700 transition-colors",children:"← Назад к Dashboard"}),t.jsx("h1",{className:"text-3xl font-bold text-mono-900 mb-2",children:"⚖️ Взвешивание для водителей"}),t.jsx("p",{className:"text-mono-600 mb-4",children:"Самостоятельное взвешивание материалов в ночное время"}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex space-x-1 bg-mono-100 p-1 rounded-lg w-fit",children:[t.jsx("button",{onClick:()=>F("simple"),className:"px-4 py-2 rounded-md font-medium transition-colors "+("simple"===I?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"🚛 Простое взвешивание"}),t.jsx("button",{onClick:()=>F("advanced"),className:"px-4 py-2 rounded-md font-medium transition-colors "+("advanced"===I?"bg-white text-black shadow-sm":"text-mono-600 hover:text-mono-900"),children:"📋 Подробные записи"})]})}),t.jsxs("div",{className:"mb-4 p-3 rounded-lg border",children:["checking"===E&&t.jsxs("div",{className:"flex items-center space-x-2 text-mono-600",children:[t.jsx("div",{className:"w-3 h-3 bg-mono-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm",children:"Проверка подключения..."})]}),"wifi"===E&&t.jsxs("div",{className:"flex items-center space-x-2 text-mono-600",children:[t.jsx("div",{className:"w-3 h-3 bg-mono-500 rounded-full"}),t.jsx("span",{className:"text-sm",children:"✅ Wi-Fi подключение активно"})]}),"mobile"===E&&t.jsxs("div",{className:"flex items-center space-x-2 text-mono-600",children:[t.jsx("div",{className:"w-3 h-3 bg-mono-500 rounded-full"}),t.jsx("span",{className:"text-sm",children:"⚠️ Обнаружено мобильное подключение"})]}),"offline"===E&&t.jsxs("div",{className:"flex items-center space-x-2 text-mono-600",children:[t.jsx("div",{className:"w-3 h-3 bg-mono-500 rounded-full"}),t.jsx("span",{className:"text-sm",children:"❌ Нет подключения к интернету"})]}),"mobile"===E&&"cloud"===c&&t.jsxs("div",{className:"mt-2 p-2 bg-mono-50 border border-mono-200 rounded text-xs text-mono-600",children:[t.jsx("strong",{children:"ИНФОРМАЦИЯ:"})," Используется облачное подключение через мобильный интернет. Данные передаются через защищенный сервер."]})]})]}),"simple"===I?t.jsx(r,{currentWeight:u,onWeightChange:g,isConnected:x,onConnect:O,onGetWeight:L,isLoading:b}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-lg flex items-center justify-center text-white text-xl",children:"⚖️"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-mono-900",children:"Весы склада"}),t.jsx("p",{className:"text-mono-600",children:"Автоматическое подключение к серверу весов"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full "+(x?"bg-mono-500":"bg-mono-700")}),t.jsx("span",{className:"text-sm font-medium "+(x?"text-mono-600":"text-mono-700"),children:x?"Подключено":"Отключено"})]})]}),t.jsxs("div",{className:"mb-6 p-4 bg-mono-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700",children:"Подключение к весам:"}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("local"===c?"bg-mono-100 text-mono-700":"bg-mono-200 text-mono-800"),children:"local"===c?"Wi-Fi (локальное)":"Облачное (мобильный интернет)"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"flex-1 px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",placeholder:"local"===c?"http://192.168.1.100:8080":"https://your-cloud-server.com:3001"}),t.jsx("button",{onClick:O,disabled:b,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-mono-800 disabled:bg-mono-400 transition-colors",children:b?"Подключение...":"Подключить"})]}),t.jsx("div",{className:"text-xs text-mono-500",children:"local"===c?t.jsx(t.Fragment,{children:"Локальное подключение через Wi-Fi сеть склада"}):t.jsx(t.Fragment,{children:"Облачное подключение через мобильный интернет"})})]})]}),t.jsxs("div",{className:"mb-6 p-6 bg-mono-50 border border-mono-200 rounded-lg text-center",children:[t.jsx("div",{className:"text-sm text-black mb-2",children:"Текущий вес:"}),t.jsx("div",{className:"text-4xl font-bold text-black",children:null!==u?`${u.toFixed(2)} кг`:"---"})]}),t.jsxs("div",{className:"flex space-x-3 mb-6",children:[t.jsxs("button",{onClick:L,disabled:!x||b,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-mono-400 transition-colors",children:[t.jsx("span",{children:"⚖️"}),t.jsx("span",{children:"Получить вес"})]}),t.jsxs("button",{onClick:async()=>{if(x)try{const e="cloud"===c?"/cloud/tare":"/tare",s=await fetch(`${i}${e}`,{method:"POST"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);g(0),f(null)}catch(e){f(`Ошибка обнуления: ${e instanceof Error?e.message:"Неизвестная ошибка"}`)}else f("Нет подключения к весам")},disabled:!x||b,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-mono-400 transition-colors",children:[t.jsx("span",{children:"🔄"}),t.jsx("span",{children:"Обнулить"})]})]}),j&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-2 text-mono-600",children:[t.jsx("span",{children:"⚠️"}),t.jsx("span",{className:"text-sm",children:j})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-bold text-mono-900 mb-4",children:"📝 Записать взвешивание"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-1",children:"Имя водителя *"}),t.jsx("input",{type:"text",value:w,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",placeholder:"Введите ваше имя"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-1",children:"Номер транспорта *"}),t.jsx("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",placeholder:"А123БВ 777"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-1",children:"Тип материала *"}),t.jsxs("select",{value:C,onChange:e=>W(e.target.value),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",children:[t.jsx("option",{value:"",children:"Выберите материал"}),t.jsx("option",{value:"песок",children:"Песок"}),t.jsx("option",{value:"щебень",children:"Щебень"}),t.jsx("option",{value:"цемент",children:"Цемент"}),t.jsx("option",{value:"бетон",children:"Бетон"}),t.jsx("option",{value:"другое",children:"Другое"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-mono-700 mb-1",children:"Примечания"}),t.jsx("input",{type:"text",value:T,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-mono-300 rounded-lg focus:ring-2 focus:ring-mono-500 focus:border-mono-500",placeholder:"Дополнительная информация"})]})]}),t.jsx("button",{onClick:()=>{if(!(u&&w&&k&&C))return void f("Заполните все обязательные поля");const e={id:Date.now().toString(),timestamp:new Date,weight:u,driver:w,vehicle:k,material:C,notes:T||void 0};N(s=>[e,...s]);const s=JSON.parse(localStorage.getItem("driverWeighingHistory")||"[]");s.unshift(e),localStorage.setItem("driverWeighingHistory",JSON.stringify(s)),y(""),S(""),W(""),$(""),alert(`✅ Взвешивание сохранено!\nВес: ${u} кг\nВодитель: ${w}\nТранспорт: ${k}\nМатериал: ${C}`)},disabled:!(u&&w&&k&&C),className:"w-full px-4 py-3 bg-black text-white rounded-lg hover:bg-black disabled:bg-mono-400 transition-colors",children:"💾 Сохранить взвешивание"})]}),v.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-mono-900 mb-4",children:"📋 История взвешиваний"}),t.jsx("div",{className:"space-y-3",children:v.slice(0,5).map(e=>t.jsxs("div",{className:"p-3 bg-mono-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-mono-900",children:[e.weight.toFixed(2)," кг - ",e.material]}),t.jsxs("div",{className:"text-sm text-mono-600",children:[e.driver," • ",e.vehicle]}),t.jsx("div",{className:"text-xs text-mono-500",children:e.timestamp.toLocaleString("ru-RU")})]}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-sm font-medium text-black",children:["#",e.id.slice(-6)]})})]}),e.notes&&t.jsxs("div",{className:"mt-2 text-sm text-mono-600 italic",children:['"',e.notes,'"']})]},e.id))})]})]})]})})};export{c as default};
