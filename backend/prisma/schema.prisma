generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(cuid())
  login         String   @unique
  password_hash String
  role          String
  createdAt     DateTime @default(now())
  updatedAt     DateTime

  @@map("users")
}

model Driver {
  id                 String   @id @default(cuid())
  name               String
  fullName           String
  phone              String
  login              String   @unique
  tempPassword       String?
  hasChangedPassword Boolean  @default(false)
  vehicleIds         String[]
  status             String   @default("active")
  isActive           Boolean  @default(true)
  createdAt          DateTime @default(now())
  updatedAt          DateTime

  @@map("drivers")
}

model InternalRequest {
  id              String   @id @default(cuid())
  title           String
  description     String
  category        String
  priority        String   // 'low' | 'medium' | 'high' | 'urgent'
  status          String   // 'pending' | 'in_progress' | 'completed' | 'cancelled'
  userId          String
  userName        String
  userRole        String
  supplierDetails String?  // JSON string
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("internal_requests")
}

model ConcreteOrder {
  id                String   @id @default(cuid())
  orderNumber       String   @unique
  customerName      String
  customerPhone     String
  customerAddress   String
  concreteGrade     String
  quantity          Float
  price             Float
  totalAmount       Float
  status            String   // 'pending' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled'
  deliveryDate      DateTime
  notes             String?
  createdBy         String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("concrete_orders")
}
